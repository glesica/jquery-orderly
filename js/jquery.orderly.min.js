(function(e,c,a){var b,f,d;d="orderly";f={direction:"ascending",listclass:"orderly",tableclass:"orderly",buttonclass:"orderly-button",sortcolumn:0,sortcallback:null,toolbar:false,showtoolbar:true,toolbarclass:"orderly-toolbar",filterlabel:"Type here to filter...",filterclass:"orderly-filter",ascbtnsrc:"img/up.png",descbtnsrc:"img/down.png",showbtnsrc:"img/plus.png",hidebtnsrc:"img/minus.png"};b=(function(){function g(i,h){this.element=i;this.options=e.extend({},f,h);this._defaults=f;this._name=d;this.init()}g.prototype.init=function(){switch(e(this.element).get(0).nodeName.toLowerCase()){case"table":return this.setupTable();case"ul":return this.setupList();default:return e.error("Orderly: DOM element not supported.")}};g.prototype.setupList=function(){var l,j,k,i,h,m=this;if(this.options.toolbar){h=e("<div>").addClass(this.options.toolbarclass);k=e('<input \n    type="text" \n    value="'+this.options.filterlabel+'"\n    class="'+this.options.filterclass+'"\n/>').keyup(function(){return m.filterList(k.val())}).focus(function(){if(k.val()===m.options.filterlabel){return k.val("")}}).blur(function(){if(k.val()===""){return k.val(this.options.filterlabel)}});l=e('<button class="'+this.options.buttonclass+'">\n    <img src="'+this.options.ascbtnsrc+'" />\n</button>').click(function(){return m.sortList("ascending")});j=e('<button class="'+this.options.buttonclass+'">\n    <img src="'+this.options.descbtnsrc+'" />\n</button>').click(function(){return m.sortList("descending")});h.append(k).append(" ").append(l).append(" ").append(j);i=e('<button class="'+this.options.buttonclass+' orderly-visible">\n    <img src="" />\n</button>').click(function(){if(h.is(":visible")){h.slideUp();return i.children("img").attr("src",m.options.showbtnsrc)}else{h.slideDown();return i.children("img").attr("src",m.options.hidebtnsrc)}});if(this.options.showtoolbar){h.show();i.children("img").attr("src",this.options.hidebtnsrc)}else{h.hide();i.children("img").attr("src",this.options.showbtnsrc)}}this.sortList(this.options.direction);return e(this.element).before(i).before(h).addClass(this.options.listclass)};g.prototype.sortList=function(j){var i,h;i=e(this.element);h=i.children("li").get();h.sort(function(l,k){var n,m;n=e(l).text().toLowerCase();m=e(k).text().toLowerCase();if(n<m){return -1}else{if(n>m){return 1}else{return 0}}});if(j==="descending"){h.reverse()}e.each(h,function(l,k){return i.append(k)});return i};g.prototype.filterList=function(i){var h;h=e(this.element);return h.children("li").each(function(){var j;j=e(this);if(j.text().toLowerCase().indexOf(i.toLowerCase())===-1){return j.hide()}else{return j.show()}})};g.prototype.setupTable=function(){var h,i=this;this.sortColumn=this.options.sortcolumn;this.sortDirection=this.options.direction;h=e(this.element).addClass(this.options.tableclass);e.each(h.find("th"),function(k,j){return e(j).click(function(){var l;if(i.sortColumn===k){if(i.sortDirection==="ascending"){l="descending"}else{l="ascending"}}else{l="ascending"}return i.sortTable(l,k)})});return this.sortTable(this.options.ordering,this.options.sortcolumn)};g.prototype.sortTable=function(k,j){var h,i;this.sortColumn=j;this.sortDirection=k;h=e(this.element).children("tbody");i=h.children("tr").get();i.sort(function(m,l){var o,n;o=e(m).children("td").get(j).innerHTML;n=e(l).children("td").get(j).innerHTML;if(o<n){return -1}else{if(o>n){return 1}else{return 0}}});if(k==="descending"){i.reverse()}e.each(i,function(m,l){return h.append(l)});if(this.options.callback!=null){this.options.callback(this)}return e(this.element)};g.prototype.filterTable=function(h){var i=this;h=h.toLowerCase();return e.each(e(this.element).find("tbody tr"),function(k,l){var j;j=e(l);return e.each(j.children("td"),function(o,m){var n;n=e(m).text().toLowerCase();if(n.indexOf(h)===-1){return j.hide()}else{return j.show()}})})};return g})();return e.fn[d]=function(g){return this.each(function(){if(!e.data(this,"plugin_"+d)){return e.data(this,"plugin_"+d,new b(this,g))}})}})(jQuery,window,document);